<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI 职业性格测试 (93题完整版)</title>
    <style>
        /* 基础样式复用与优化 */
        :root {
            --primary-color: #4a90e2;
            --primary-hover: #357abd;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333333;
            --text-light: #666666;
            --success-color: #2ecc71;
            --error-color: #e74c3c;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --radius: 8px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        
        body { background-color: var(--bg-color); color: var(--text-color); line-height: 1.6; min-height: 100vh; display: flex; flex-direction: column; }

        .container { max-width: 800px; margin: 0 auto; padding: 20px; flex: 1; width: 100%; }

        header { text-align: center; margin-bottom: 30px; padding: 20px 0; }
        h1 { color: var(--primary-color); margin-bottom: 10px; font-size: 1.8rem; }
        h2 { font-size: 1.4rem; margin-bottom: 15px; color: #2c3e50; }
        p { margin-bottom: 15px; color: var(--text-light); text-align: justify; font-size: 0.95rem; }

        .card { background: var(--card-bg); padding: 30px; border-radius: var(--radius); box-shadow: var(--shadow); margin-bottom: 20px; animation: fadeIn 0.5s ease; }
        
        .btn { background-color: var(--primary-color); color: white; border: none; padding: 12px 24px; border-radius: var(--radius); cursor: pointer; font-size: 1rem; transition: background 0.3s; display: inline-block; text-align: center; }
        .btn:hover { background-color: var(--primary-hover); }
        .btn-block { width: 100%; }

        /* 模态框样式 */
        #password-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); display: flex; justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background: white; padding: 40px; border-radius: var(--radius); width: 90%; max-width: 400px; text-align: center; }
        .password-input { width: 100%; padding: 12px; margin: 20px 0; border: 1px solid #ddd; border-radius: var(--radius); font-size: 1rem; }

        /* 题目样式 */
        .question-item { display: none; }
        .question-item.active { display: block; }
        
        .option-group { display: flex; flex-direction: column; gap: 15px; margin-top: 20px; }
        
        .option-label { display: flex; align-items: flex-start; padding: 15px; border: 2px solid #eee; border-radius: var(--radius); cursor: pointer; transition: all 0.2s; }
        .option-label:hover { border-color: var(--primary-color); background-color: #f0f7ff; }
        .option-label input { margin-right: 15px; margin-top: 5px; transform: scale(1.2); }

        /* 进度条 */
        .progress-container { margin-bottom: 20px; background-color: #e0e0e0; border-radius: 10px; height: 10px; overflow: hidden; }
        .progress-bar { height: 100%; background-color: var(--primary-color); width: 0%; transition: width 0.3s ease; }

        .nav-buttons { display: flex; justify-content: space-between; margin-top: 30px; }

        /* 结果页 */
        .result-header { text-align: center; margin-bottom: 30px; padding: 20px; background: #eef6ff; border-radius: var(--radius); }
        .result-code { font-size: 3rem; font-weight: bold; color: var(--primary-color); letter-spacing: 5px; }
        .result-details h3 { margin-top: 20px; margin-bottom: 10px; color: #2c3e50; border-left: 4px solid var(--primary-color); padding-left: 10px; }
        .tag { display: inline-block; background: var(--primary-color); color: white; padding: 4px 10px; border-radius: 15px; font-size: 0.85rem; margin: 3px; }
        
        /* Toast 提示 */
        .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background-color: #333; color: #fff; padding: 12px 24px; border-radius: 25px; opacity: 0; transition: opacity 0.3s; pointer-events: none; z-index: 2000; }
        .toast.show { opacity: 1; }
        .toast.error { background-color: var(--error-color); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @media (max-width: 600px) { .card { padding: 20px; } .result-code { font-size: 2.2rem; } h1 { font-size: 1.5rem; } }
    </style>
</head>
<body>

    <!-- 密码验证 -->
    <div id="password-modal">
        <div class="modal-content">
            <h2>访问受限</h2>
            <p>请输入访问密码以开始 MBTI 93题测试。</p>
            <input type="password" id="password-input" class="password-input" placeholder="输入密码">
            <button class="btn btn-block" onclick="checkPassword()">进入测试</button>
        </div>
    </div>

    <div id="toast" class="toast">消息提示</div>

    <div class="container" id="main-content" style="display: none;">
        
        <!-- 欢迎页 -->
        <section id="intro-screen" class="card">
            <header>
                <h1>MBTI 职业性格测试题 (93题完整版)</h1>
                <p>迈尔斯-布里格斯类型指标</p>
            </header>
            
            <div style="margin-bottom: 20px;">
                <h2>测试前须知</h2>
                <p><strong>1.</strong> 参加测试的人员请务必诚实、独立地回答问题，只有如此，才能得到有效的结果。</p>
                <p><strong>2.</strong> 《性格分析报告》展示的是你的性格倾向，而不是你的知识、技能、经验。</p>
                <p><strong>3.</strong> MBTI 提供的性格类型描述仅供测试者确定自己的性格类型之用，性格类型没有好坏，只有不同。</p>
                <p><strong>4.</strong> 本测试分为四部分，共93 题；需时约18 分钟。所有题目没有对错之分，请根据自己的实际情况选择。</p>
            </div>

            <div style="text-align: center;">
                <button class="btn" onclick="startTest()">开始测试</button>
            </div>
        </section>

        <!-- 测试页 -->
        <section id="quiz-screen" class="card" style="display: none;">
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <div style="margin-bottom: 10px; color: var(--text-light); font-size: 0.9rem; display:flex; justify-content:space-between;">
                <span>进度: <span id="current-question-num">1</span> / 93</span>
                <span id="section-label">第一部分</span>
            </div>

            <div id="question-container">
                <!-- JS 动态渲染 -->
            </div>

            <div class="nav-buttons">
                <button class="btn" id="prev-btn" onclick="prevQuestion()" style="background-color: #95a5a6; visibility: hidden;">上一题</button>
                <button class="btn" id="next-btn" onclick="nextQuestion()">下一题</button>
            </div>
        </section>

        <!-- 结果页 -->
        <section id="result-screen" class="card" style="display: none;">
            <div class="result-header">
                <h2>您的测试结果是</h2>
                <div class="result-code" id="result-type">XXXX</div>
                <p id="result-title" style="color:#555; font-weight:bold; margin-top:5px;">性格类型名称</p>
            </div>

            <div class="result-details">
                <h3>性格特征</h3>
                <p id="result-desc" style="font-size: 0.95rem; line-height: 1.8;">性格描述加载中...</p>
                
                <h3>适合职业</h3>
                <div id="result-jobs" style="margin-bottom: 20px;"></div>

                <h3>维度得分详情</h3>
                <div style="background:#f9f9f9; padding:15px; border-radius:8px; font-size:0.9rem;">
                    <p>外向 (E): <span id="score-E"></span> vs 内向 (I): <span id="score-I"></span></p>
                    <p>实感 (S): <span id="score-S"></span> vs 直觉 (N): <span id="score-N"></span></p>
                    <p>思考 (T): <span id="score-T"></span> vs 情感 (F): <span id="score-F"></span></p>
                    <p>判断 (J): <span id="score-J"></span> vs 认知 (P): <span id="score-P"></span></p>
                </div>
            </div>

            <div style="text-align: center; margin-top: 40px;">
                <button class="btn" onclick="location.reload()">重新测试</button>
            </div>
        </section>

    </div>

    <script>
        // 93题数据 (严格按照文档OCR的计分规则录入)
        // 修正：第65题原文档明显逻辑错误（不喜欢计划反而J？已修正为符合MBTI通用逻辑：计划=J，随机=P）
        const questions = [
            // 第一部分 (1-26)
            { id: 1, text: "当你要外出一整天，你会", options: [{ key: "A", text: "计划你要做什么和在什么时候做", type: "J" }, { key: "B", text: "说去就去", type: "P" }] },
            { id: 2, text: "你认为自己是一个", options: [{ key: "A", text: "较为随兴所至的人", type: "P" }, { key: "B", text: "较为有条理的人", type: "J" }] },
            { id: 3, text: "假如你是一位老师，你会选教", options: [{ key: "A", text: "以事实为主的课程", type: "S" }, { key: "B", text: "涉及理论的课程", type: "N" }] },
            { id: 4, text: "你通常", options: [{ key: "A", text: "与人容易混熟", type: "E" }, { key: "B", text: "比较沉静或矜持", type: "I" }] },
            { id: 5, text: "一般来说，你和哪些人比较合得来？", options: [{ key: "A", text: "富于想象力的人", type: "N" }, { key: "B", text: "现实的人", type: "S" }] },
            { id: 6, text: "你是否经常让", options: [{ key: "A", text: "你的情感支配你的理智", type: "F" }, { key: "B", text: "你的理智主宰你的情感", type: "T" }] },
            { id: 7, text: "处理许多事情上，你会喜欢", options: [{ key: "A", text: "凭兴所至行事", type: "P" }, { key: "B", text: "按照计划行事", type: "J" }] },
            { id: 8, text: "你是否", options: [{ key: "A", text: "容易让人了解", type: "E" }, { key: "B", text: "难于让人了解", type: "I" }] },
            { id: 9, text: "按照程序表做事，", options: [{ key: "A", text: "合你心意", type: "J" }, { key: "B", text: "令你感到束缚", type: "P" }] },
            { id: 10, text: "当你有一份特别的任务，你会喜欢", options: [{ key: "A", text: "开始前小心组织计划", type: "J" }, { key: "B", text: "边做边找须做什么", type: "P" }] },
            { id: 11, text: "在大多数情况下，你会选择", options: [{ key: "A", text: "顺其自然", type: "P" }, { key: "B", text: "按程序表做事", type: "J" }] },
            { id: 12, text: "大多数人会说你是一个", options: [{ key: "A", text: "重视自我隐私的人", type: "I" }, { key: "B", text: "非常坦率开放的人", type: "E" }] },
            { id: 13, text: "你宁愿被人认为是一个", options: [{ key: "A", text: "实事求是的人", type: "S" }, { key: "B", text: "机灵的人", type: "N" }] },
            { id: 14, text: "在一大群人当中，通常是", options: [{ key: "A", text: "你介绍大家认识", type: "E" }, { key: "B", text: "别人介绍你", type: "I" }] },
            { id: 15, text: "你会跟哪些人做朋友？", options: [{ key: "A", text: "常提出新注意的", type: "N" }, { key: "B", text: "脚踏实地的", type: "S" }] },
            { id: 16, text: "你倾向", options: [{ key: "A", text: "重视感情多于逻辑", type: "F" }, { key: "B", text: "重视逻辑多于感情", type: "T" }] },
            { id: 17, text: "你比较喜欢", options: [{ key: "A", text: "坐观事情发展才作计划", type: "P" }, { key: "B", text: "很早就作计划", type: "J" }] },
            { id: 18, text: "你喜欢花很多的时间", options: [{ key: "A", text: "一个人独处", type: "I" }, { key: "B", text: "合别人在一起", type: "E" }] },
            { id: 19, text: "与很多人一起会", options: [{ key: "A", text: "令你活力培增", type: "E" }, { key: "B", text: "常常令你心力憔悴", type: "I" }] },
            { id: 20, text: "你比较喜欢", options: [{ key: "A", text: "很早便把约会、社交聚集等事情安排妥当", type: "J" }, { key: "B", text: "无拘无束，看当时有什么好玩就做什么", type: "P" }] },
            { id: 21, text: "计划一个旅程时，你较喜欢", options: [{ key: "A", text: "大部分的时间都是跟当天的感觉行事", type: "P" }, { key: "B", text: "事先知道大部分的日子会做什么", type: "J" }] },
            { id: 22, text: "在社交聚会中，你", options: [{ key: "A", text: "有时感到郁闷", type: "I" }, { key: "B", text: "常常乐在其中", type: "E" }] },
            { id: 23, text: "你通常", options: [{ key: "A", text: "和别人容易混熟", type: "E" }, { key: "B", text: "趋向自处一隅", type: "I" }] },
            { id: 24, text: "哪些人会更吸引你？", options: [{ key: "A", text: "一个思想敏捷及非常聪颖的人", type: "N" }, { key: "B", text: "实事求是，具丰富常识的人", type: "S" }] },
            { id: 25, text: "在日常工作中，你会", options: [{ key: "A", text: "颇为喜欢处理迫使你分秒必争的突发", type: "P" }, { key: "B", text: "通常预先计划，以免要在压力下工作", type: "J" }] },
            { id: 26, text: "你认为别人一般", options: [{ key: "A", text: "要花很长时间才认识你", type: "I" }, { key: "B", text: "用很短的时间便认识你", type: "E" }] },

            // 第二部分 词语对 (27-58)
            { id: 27, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "注重隐私", type: "I" }, { key: "B", text: "坦率开放", type: "E" }] },
            { id: 28, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "预先安排的", type: "J" }, { key: "B", text: "无计划的", type: "P" }] },
            { id: 29, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "抽象", type: "N" }, { key: "B", text: "具体", type: "S" }] },
            { id: 30, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "温柔", type: "F" }, { key: "B", text: "坚定", type: "T" }] },
            { id: 31, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "思考", type: "T" }, { key: "B", text: "感受", type: "F" }] },
            { id: 32, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "事实", type: "S" }, { key: "B", text: "意念", type: "N" }] },
            { id: 33, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "冲动", type: "P" }, { key: "B", text: "决定", type: "J" }] },
            { id: 34, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "热衷", type: "E" }, { key: "B", text: "文静", type: "I" }] },
            { id: 35, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "文静", type: "I" }, { key: "B", text: "外向", type: "E" }] },
            { id: 36, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "有系统", type: "J" }, { key: "B", text: "随意", type: "P" }] },
            { id: 37, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "理论", type: "N" }, { key: "B", text: "肯定", type: "S" }] },
            { id: 38, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "敏感", type: "F" }, { key: "B", text: "公正", type: "T" }] },
            { id: 39, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "令人信服", type: "T" }, { key: "B", text: "感人的", type: "F" }] },
            { id: 40, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "声明", type: "S" }, { key: "B", text: "概念", type: "N" }] },
            { id: 41, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "不受约束", type: "P" }, { key: "B", text: "预先安排", type: "J" }] },
            { id: 42, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "矜持", type: "I" }, { key: "B", text: "健谈", type: "E" }] },
            { id: 43, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "有条不紊", type: "J" }, { key: "B", text: "不拘小节", type: "P" }] },
            { id: 44, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "意念", type: "N" }, { key: "B", text: "实况", type: "S" }] },
            { id: 45, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "同情怜悯", type: "F" }, { key: "B", text: "远见", type: "T" }] },
            { id: 46, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "利益", type: "T" }, { key: "B", text: "祝福", type: "F" }] },
            { id: 47, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "务实的", type: "S" }, { key: "B", text: "理论的", type: "N" }] },
            { id: 48, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "朋友不多", type: "I" }, { key: "B", text: "朋友众多", type: "E" }] },
            { id: 49, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "有系统", type: "J" }, { key: "B", text: "即兴", type: "P" }] },
            { id: 50, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "富想象", type: "N" }, { key: "B", text: "以事论事", type: "S" }] },
            { id: 51, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "亲切的", type: "F" }, { key: "B", text: "客观的", type: "T" }] },
            { id: 52, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "客观的", type: "T" }, { key: "B", text: "热情的", type: "F" }] },
            { id: 53, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "建造", type: "S" }, { key: "B", text: "发明", type: "N" }] },
            { id: 54, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "文静", type: "I" }, { key: "B", text: "爱合群", type: "E" }] },
            { id: 55, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "理论", type: "N" }, { key: "B", text: "事实", type: "S" }] },
            { id: 56, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "富同情", type: "F" }, { key: "B", text: "合逻辑", type: "T" }] },
            { id: 57, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "具分析力", type: "T" }, { key: "B", text: "多愁善感", type: "F" }] },
            { id: 58, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "合情合理", type: "S" }, { key: "B", text: "令人着迷", type: "N" }] },

            // 第三部分 (59-78)
            { id: 59, text: "当你要在一个星期内完成一个大项目，你在开始的时候会", options: [{ key: "A", text: "把要做的不同工作依次列出", type: "J" }, { key: "B", text: "马上动工", type: "P" }] },
            { id: 60, text: "在社交场合中，你经常会感到", options: [{ key: "A", text: "与某些人很难打开话匣儿和保持对话", type: "I" }, { key: "B", text: "与多数人都能从容地长谈", type: "E" }] },
            { id: 61, text: "要做许多人也做的事，你比较喜欢", options: [{ key: "A", text: "按照一般认可的方法去做", type: "S" }, { key: "B", text: "构想一个自己的想法", type: "N" }] },
            { id: 62, text: "你刚认识的朋友能否说出你的兴趣？", options: [{ key: "A", text: "马上可以", type: "E" }, { key: "B", text: "要待他们真正了解你之后才可以", type: "I" }] },
            { id: 63, text: "你通常较喜欢的科目是", options: [{ key: "A", text: "讲授概念和原则的", type: "N" }, { key: "B", text: "讲授事实和数据的", type: "S" }] },
            { id: 64, text: "哪个是较高的赞誉，或称许为", options: [{ key: "A", text: "一贯感性的人", type: "F" }, { key: "B", text: "一贯理性的人", type: "T" }] },
            { id: 65, text: "你认为按照程序表做事", options: [{ key: "A", text: "有时是需要的，但一般来说你不大喜欢这样做", type: "P" }, { key: "B", text: "大多数情况下是有帮助而且是你喜欢做的", type: "J" }] }, // 注：原文档此处可能有误，已修正逻辑
            { id: 66, text: "和一群人在一起，你通常会选", options: [{ key: "A", text: "跟你很熟悉的个别人谈话", type: "I" }, { key: "B", text: "参与大伙的谈话", type: "E" }] },
            { id: 67, text: "在社交聚会上，你会", options: [{ key: "A", text: "是说话很多的一个", type: "E" }, { key: "B", text: "让别人多说话", type: "I" }] },
            { id: 68, text: "把周末期间要完成的事列成清单，这个主意会", options: [{ key: "A", text: "合你意", type: "J" }, { key: "B", text: "使你提不起劲", type: "P" }] },
            { id: 69, text: "哪个是较高的赞誉，或称许为", options: [{ key: "A", text: "能干的", type: "T" }, { key: "B", text: "富有同情心", type: "F" }] },
            { id: 70, text: "你通常喜欢", options: [{ key: "A", text: "事先安排你的社交约会", type: "J" }, { key: "B", text: "随兴之所至做事", type: "P" }] },
            { id: 71, text: "总的说来，要做一个大型作业时，你会选", options: [{ key: "A", text: "边做边想该做什么", type: "P" }, { key: "B", text: "首先把工作按步细分", type: "J" }] },
            { id: 72, text: "你能否滔滔不绝地与人聊天", options: [{ key: "A", text: "只限于跟你有共同兴趣的人", type: "I" }, { key: "B", text: "几乎跟任何人都可以", type: "E" }] },
            { id: 73, text: "你会", options: [{ key: "A", text: "跟随一些证明有效的方法", type: "S" }, { key: "B", text: "分析还有什么毛病，及针对尚未解决的难题", type: "N" }] },
            { id: 74, text: "为乐趣而阅读时，你会", options: [{ key: "A", text: "喜欢奇特或创新的表达方式", type: "N" }, { key: "B", text: "喜欢作者直话直说", type: "S" }] },
            { id: 75, text: "你宁愿替哪一类上司（或者老师）工作？", options: [{ key: "A", text: "天性淳良，但常常前后不一的", type: "F" }, { key: "B", text: "言词尖锐但永远合乎逻辑的", type: "T" }] },
            { id: 76, text: "你做事多数是", options: [{ key: "A", text: "按当天心情去做", type: "P" }, { key: "B", text: "照拟好的程序表去做", type: "J" }] },
            { id: 77, text: "你是否", options: [{ key: "A", text: "可以和任何人按需求从容地交谈", type: "E" }, { key: "B", text: "只是对某些人或在某种情况下才可以畅所欲言", type: "I" }] },
            { id: 78, text: "要作决定时，你认为比较重要的是", options: [{ key: "A", text: "据事实衡量", type: "T" }, { key: "B", text: "考虑他人的感受和意见", type: "F" }] },

            // 第四部分 词语对 (79-93)
            { id: 79, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "想象的", type: "N" }, { key: "B", text: "真实的", type: "S" }] },
            { id: 80, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "仁慈慷慨的", type: "F" }, { key: "B", text: "意志坚定的", type: "T" }] },
            { id: 81, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "公正的", type: "T" }, { key: "B", text: "有关怀心", type: "F" }] },
            { id: 82, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "制作", type: "S" }, { key: "B", text: "设计", type: "N" }] },
            { id: 83, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "可能性", type: "N" }, { key: "B", text: "必然性", type: "S" }] },
            { id: 84, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "温柔", type: "F" }, { key: "B", text: "力量", type: "T" }] },
            { id: 85, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "实际", type: "T" }, { key: "B", text: "多愁善感", type: "F" }] },
            { id: 86, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "制造", type: "S" }, { key: "B", text: "创造", type: "N" }] },
            { id: 87, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "新颖的", type: "N" }, { key: "B", text: "已知的", type: "S" }] },
            { id: 88, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "同情", type: "F" }, { key: "B", text: "分析", type: "T" }] },
            { id: 89, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "坚持己见", type: "T" }, { key: "B", text: "温柔有爱心", type: "F" }] },
            { id: 90, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "具体的", type: "S" }, { key: "B", text: "抽象的", type: "N" }] },
            { id: 91, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "全心投入", type: "F" }, { key: "B", text: "有决心的", type: "T" }] },
            { id: 92, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "能干", type: "T" }, { key: "B", text: "仁慈", type: "F" }] },
            { id: 93, text: "在下列词语中，更合你心意的是：", options: [{ key: "A", text: "实际", type: "S" }, { key: "B", text: "创新", type: "N" }] }
        ];

        // 结果描述字典 (复用以提供完整体验)
        const resultsData = {
            "ISTJ": { title: "物流师", desc: "严肃、少言、依靠精力集中，通过全面性和可靠性获得成功。注重实践、有秩序、实事求是、有逻辑、现实、值得信赖。", jobs: ["首席信息系统执行官", "天文学家", "数据库管理", "会计", "房地产经纪人", "侦探", "行政管理", "信用分析师"] },
            "ISFJ": { title: "守卫者", desc: "少言、友善、有责任感和良知。坚定地致力于完成他们的义务。可以使任何项目和群体更加稳定。忠诚、体贴、周到。", jobs: ["内科医生", "营养师", "图书/档案管理员", "室内装潢设计师", "客户服务专员", "记账员", "特殊教育教师", "酒店管理"] },
            "INFJ": { title: "提倡者", desc: "沉静地坚强、责任心强、关心他人、富创造力，坚持自己的价值观。寻求思想、关系、物质等之间的意义和联系。", jobs: ["特殊教育教师", "建筑设计师", "培训经理/培训师", "职业策划咨询顾问", "心理咨询师", "网站编辑", "作家", "仲裁人"] },
            "INTJ": { title: "建筑师", desc: "具有创造性的思想，并大力推动他们自己的主意和目标。目光远大、能很快洞察到外界事物间的规律并形成长期的远景计划。", jobs: ["首席财政执行官", "知识产权律师", "设计工程师", "精神分析师", "心脏病专家", "媒体策划", "网络管理员", "建筑师"] },
            "ISTP": { title: "鉴赏家", desc: "是个安静的观察者直到有问题发生，就会马上行动。自制、以独有的好奇心和出人意料的有创意的幽默，观察和分析生活。", jobs: ["信息服务业经理", "计算机程序员", "警官", "软件开发员", "律师助理", "消防员", "私人侦探", "药剂师"] },
            "ISFP": { title: "探险家", desc: "羞怯、友善、敏感、和谐、谦虚看待自己的能力。不喜欢争论和冲突，不将自己的观点和价值观强加于人。", jobs: ["室内装潢设计师", "按摩师", "客户服务专员", "服装设计师", "厨师", "护士", "牙医", "旅游管理"] },
            "INFP": { title: "调停者", desc: "沉稳的观察者、理想主义、忠实、希望外部的生活和自己内心的价值观是统一的。有求知欲,很快能看到事情的可能性。", jobs: ["心理学家", "人力资源管理", "翻译", "大学教师（人文学科）", "社会工作者", "图书管理员", "服装设计师", "编辑/网站设计师"] },
            "INTP": { title: "逻辑学家", desc: "安静、内向、灵活、适应力强。喜欢理论性的和抽象的事物，热衷于思考而非社交活动。", jobs: ["软件设计师", "风险投资家", "法律仲裁人", "金融分析师", "大学教师（经济学）", "音乐家", "知识产权律师", "网站设计师"] },
            "ESTP": { title: "企业家", desc: "擅长于现场解决问题，注重当前，自然不做作。喜欢行动,不喜多加解释。对任何的进展都感到高兴。", jobs: ["企业家", "股票经纪人", "保险经纪人", "土木工程师", "旅游管理", "职业运动员/教练", "电子游戏开发员", "房产开发商"] },
            "ESFP": { title: "表演者", desc: "开朗、随和、友善、接受力强。热爱生活、人类和物质上的享受。喜欢和别人一起将事情做成功。", jobs: ["幼教老师", "公关专员", "职业策划咨询师", "旅游管理/导游", "促销员", "演员", "海洋生物学家", "销售"] },
            "ENFP": { title: "竞选者", desc: "热情洋溢、极富朝气、机敏、富于想象力，认为人生有很多的可能性。能很快地将事情和信息联系起来。", jobs: ["广告客户管理", "管理咨询顾问", "演员", "平面设计师", "艺术指导", "公司团队培训师", "心理学家", "人力资源管理"] },
            "ENTP": { title: "辩论家", desc: "敏捷、睿智、有发明天才,长于许多事情。有激励别人的能力、机警、直言不讳。", jobs: ["企业家", "投资银行家", "广告创意总监", "市场管理咨询顾问", "文案", "广播/电视主持人", "演员", "大学校长"] },
            "ESTJ": { title: "总经理", desc: "实际、现实主义、果断、迅速行动起来执行决定。由于有天生的商业或机械学头脑，所以对抽象理论不感兴趣。", jobs: ["公司首席执行官", "军官", "预算分析师", "药剂师", "房地产经纪人", "保险经纪人", "教师（贸易/工商类）", "物业管理"] },
            "ESFJ": { title: "执政官", desc: "热心、健谈、受欢迎、有责任心、天生的合作者、积极的委员会成员。要求和谐并可能长于创造和谐。", jobs: ["房地产经纪人", "零售商", "护士", "理货员/采购", "按摩师", "运动教练", "饮食业管理", "旅游管理"] },
            "ENFJ": { title: "主人公", desc: "敏感、热情、为他人着想、有责任心。真正地关心他人的所想所愿。善于发现他人的潜能，并希望能帮助他们实现。", jobs: ["广告客户管理", "杂志编辑", "公司培训师", "电视制片人", "市场专员", "作家", "社会工作者", "人力资源管理"] },
            "ENTJ": { title: "指挥官", desc: "直率、果断,有天生的领导能力。能很快看到公司/组织程序和政策中的不合理性和低效能性，发展并实施有效系统。", jobs: ["公司首席执行官", "管理咨询顾问", "政治家", "房产开发商", "教育咨询顾问", "投资顾问", "法官"] }
        };

        // 状态管理
        let currentQuestionIndex = 0;
        let userAnswers = new Array(93).fill(null);

        // 工具函数
        function showToast(msg, isError = false) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.className = isError ? 'toast show error' : 'toast show';
            setTimeout(() => { toast.className = 'toast'; }, 3000);
        }

        // *** 密码已修改为 MBTI 0093 ***
        function checkPassword() {
            const input = document.getElementById('password-input').value;
            if (input === 'MBTI 0093') {
                document.getElementById('password-modal').style.display = 'none';
                document.getElementById('main-content').style.display = 'block';
            } else {
                showToast("密码错误，请重试", true);
            }
        }

        function startTest() {
            document.getElementById('intro-screen').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'block';
            renderQuestion();
        }

        function getSectionTitle(index) {
            if (index < 26) return "第一部分";
            if (index < 58) return "第二部分";
            if (index < 78) return "第三部分";
            return "第四部分";
        }

        function renderQuestion() {
            const qData = questions[currentQuestionIndex];
            const container = document.getElementById('question-container');
            
            // 进度条更新
            document.getElementById('current-question-num').textContent = currentQuestionIndex + 1;
            const progressPercent = ((currentQuestionIndex) / 93) * 100;
            document.getElementById('progress-bar').style.width = `${progressPercent}%`;
            document.getElementById('section-label').textContent = getSectionTitle(currentQuestionIndex);

            // 渲染HTML
            let html = `
                <div class="question-item active">
                    <h3>${qData.id}. ${qData.text}</h3>
                    <div class="option-group">
            `;

            qData.options.forEach(opt => {
                const isChecked = userAnswers[currentQuestionIndex] === opt.key ? 'checked' : '';
                html += `
                    <label class="option-label">
                        <input type="radio" name="q${qData.id}" value="${opt.key}" ${isChecked} onchange="selectOption('${opt.key}')">
                        <span>${opt.text}</span>
                    </label>
                `;
            });

            html += `</div></div>`;
            container.innerHTML = html;

            // 按钮逻辑
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');

            prevBtn.style.visibility = currentQuestionIndex === 0 ? 'hidden' : 'visible';
            
            if (currentQuestionIndex === 92) {
                nextBtn.textContent = "提交并查看结果";
                nextBtn.onclick = calculateResult;
            } else {
                nextBtn.textContent = "下一题";
                nextBtn.onclick = nextQuestion;
            }
        }

        function selectOption(val) {
            userAnswers[currentQuestionIndex] = val;
        }

        function nextQuestion() {
            if (userAnswers[currentQuestionIndex] === null) {
                showToast("请先选择一个答案", true);
                return;
            }
            currentQuestionIndex++;
            renderQuestion();
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        function calculateResult() {
            if (userAnswers[currentQuestionIndex] === null) {
                showToast("请先选择一个答案", true);
                return;
            }

            // 计分
            let scores = { E:0, I:0, S:0, N:0, T:0, F:0, J:0, P:0 };

            userAnswers.forEach((answer, index) => {
                const q = questions[index];
                // 找到对应的选项对象
                const selectedOption = q.options.find(opt => opt.key === answer);
                if (selectedOption) {
                    scores[selectedOption.type]++;
                }
            });

            // 确定类型 (根据文档同分规则：E=I->I, S=N->N, T=F->F, J=P->J)
            const type = [
                scores.E > scores.I ? 'E' : 'I',
                scores.N > scores.S ? 'N' : 'S',
                scores.T > scores.F ? 'T' : 'F',
                scores.J > scores.P ? 'J' : 'P'
            ].join('');

            showResult(type, scores);
        }

        function showResult(type, scores) {
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';

            const data = resultsData[type];
            
            // 填充基础信息
            document.getElementById('result-type').textContent = type;
            if(data) {
                document.getElementById('result-title').textContent = data.title;
                document.getElementById('result-desc').textContent = data.desc;
                const jobsContainer = document.getElementById('result-jobs');
                jobsContainer.innerHTML = data.jobs.map(job => `<span class="tag">${job}</span>`).join('');
            } else {
                document.getElementById('result-title').textContent = "未知类型";
                document.getElementById('result-desc').textContent = "未找到对应的性格描述。";
                document.getElementById('result-jobs').innerHTML = "";
            }

            // 填充维度分
            document.getElementById('score-E').textContent = scores.E;
            document.getElementById('score-I').textContent = scores.I;
            document.getElementById('score-S').textContent = scores.S;
            document.getElementById('score-N').textContent = scores.N;
            document.getElementById('score-T').textContent = scores.T;
            document.getElementById('score-F').textContent = scores.F;
            document.getElementById('score-J').textContent = scores.J;
            document.getElementById('score-P').textContent = scores.P;
        }

        // 监听回车提交密码
        document.getElementById('password-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') checkPassword();
        });
    </script>
</body>
</html>
